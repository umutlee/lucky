# All Lucky - 運勢預測應用

一款基於 Flutter 開發的運勢預測應用，提供每日運勢查詢、方位指南和通知提醒功能。

## 功能特點

### 1. 運勢預測
- 支持多種運勢類型（總體運勢、愛情運勢、事業運勢、財運）
- 提供每日運勢評分和詳細解讀
- 支持日期選擇和歷史記錄查詢

### 2. 方位指南
- 實時顯示當前方位
- 提供吉利方位提示
- 支持方位解讀和建議

### 3. 推送通知
- 支持每日運勢提醒
- 可自定義通知時間
- 支持即時通知和定時通知
- 提供通知管理功能

## 技術特點

- 使用 Flutter 3.x 最新版本開發
- 採用 Clean Architecture 架構
- 使用 Riverpod 進行狀態管理
- 實現響應式設計，支持多種設備尺寸
- 使用 SQLite 進行本地數據存儲
- 集成推送通知功能
- 實現完整的錯誤處理和日誌記錄

## 開發環境要求

- Flutter 3.x
- Dart 3.x
- Android Studio / VS Code
- iOS 13.0+ / Android 5.0+

## 安裝說明

1. 克隆項目
```bash
git clone https://github.com/umutlee/lucky.git
```

2. 安裝依賴
```bash
flutter pub get
```

3. 運行應用
```bash
flutter run
```

## 項目結構

```
lib/
  ├── core/                 # 核心功能
  │   ├── services/        # 服務層
  │   ├── utils/           # 工具類
  │   └── widgets/         # 共用組件
  ├── features/            # 功能模塊
  │   ├── fortune/         # 運勢預測
  │   ├── compass/         # 方位指南
  │   └── notification/    # 推送通知
  └── main.dart            # 入口文件
```

## 使用說明

### 運勢預測
1. 在首頁選擇想要查詢的運勢類型
2. 選擇日期（默認為當天）
3. 查看運勢評分和詳細解讀

### 方位指南
1. 進入方位指南頁面
2. 保持手機水平以獲取準確的方位數據
3. 查看當前方位和吉利方位提示

### 推送通知
1. 首次使用時會請求通知權限
2. 在設置中可以自定義通知時間
3. 可以開啟/關閉每日運勢提醒
4. 支持手動清除所有通知

## 注意事項

- 方位指南功能需要設備支持磁力計
- 推送通知需要系統授權
- 建議保持網絡連接以獲取最新數據

## 貢獻指南

歡迎提交 Issue 和 Pull Request 來改進項目。

## 許可證

本項目基於 MIT 許可證開源。

# 存儲層優化更新說明

## 更新內容
1. 移除 SharedPreferences，統一使用 SQLite 作為本地存儲
2. 實現多級緩存策略（內存 + 數據庫）
3. 添加緩存監控和管理功能
4. 優化存儲層性能

## 主要改動
- 重構 Repository 類，統一使用 DatabaseService
- 實現 LRU 算法的內存緩存
- 添加緩存統計和監控界面
- 實現自動緩存清理機制
- 完善單元測試

## 使用說明
緩存管理功能可以在設置頁面中找到，提供以下功能：
- 查看緩存使用統計
- 清理過期緩存
- 清理所有緩存
- 實時監控緩存命中率（調試模式）

# 諸事大吉

## 開發指引

### 文檔閱讀順序
在開始任何開發工作前，請按照以下順序閱讀相關文檔：

1. **核心原則** (`/docs/CORE_PRINCIPLES.md`)
   - 理解應用的基本理念和核心價值
   - 確認功能設計原則
   - 檢查數據來源規範

2. **架構文檔** (`/docs/ARCHITECTURE.md`)
   - 了解系統整體架構
   - 確認服務依賴關係
   - 掌握數據流轉方式

3. **API 文檔** (`/docs/api/API.md`)
   - 查看 API 設計規範
   - 了解數據交互方式
   - 確認錯誤處理機制

4. **開發指南** (`/docs/DEVELOPMENT_GUIDE.md`)
   - 掌握開發環境配置
   - 遵循代碼規範
   - 了解開發流程

5. **測試文檔** (`/docs/TESTING.md`)
   - 確認測試策略
   - 查看測試用例要求
   - 了解性能指標

6. **進度記錄** (`/docs/PROGRESS.md`)
   - 查看當前開發進度
   - 了解待辦事項
   - 確認已知問題

### 開發檢查清單
每次開發前必須：
- [ ] 閱讀並理解核心原則
- [ ] 確認功能符合基本理念
- [ ] 檢查數據來源合規性
- [ ] 評估技術可行性
- [ ] 查看相關進度記錄

### 開發注意事項
1. 始終以實用性為核心，避免過度開發
2. 保持功能簡單直觀，拒絕複雜設計
3. 優先使用本地計算，減少外部依賴
4. 重視用戶體驗，保持趣味性
5. 定期檢查與核心原則的一致性

## 技術棧

- 框架：Flutter (最新穩定版)
- 狀態管理：Riverpod
- 本地存儲：SQLite
- 網絡請求：Dio
- 代碼生成：freezed

## 開發環境

### 必要條件
- Flutter SDK
- Dart SDK
- Android Studio / VS Code
- Git
- SQLite

### 環境配置
```bash
# 克隆項目
git clone https://github.com/your-org/all-lucky.git
cd all-lucky

# 安裝依賴
flutter pub get

# 生成代碼
flutter pub run build_runner build --delete-conflicting-outputs
```

## 更新記錄

### 2024-03-21
- 添加文檔閱讀順序
- 完善開發指引
- 更新開發檢查清單
- 補充注意事項說明 